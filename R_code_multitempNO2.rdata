#settiamo la wd anche se non serve in realtà perchè l abbiamo fatta prima
setwd("C:/lab_eco/")
#la libreria che utilizziamo è raster quindi la richiamo
library(raster) #in realtà non avendo chiuso R non serviva farlo 
#ora prendiamo dentro tramite la funzione ratser la prima immagine presa da iol che si trova in lab_eco
EN01 <- raster("EN_0001.png") #le do anche un nome più comodo
plot(EN01) # così la visualizzo (è la situa dell'azoto a gennaio)
#procediampo ad importare tutte le immagini 
EN02 <- raster("EN_0002.png")
EN03 <- raster("EN_0003.png")
EN04 <- raster("EN_0004.png")
EN05 <- raster("EN_0005.png")
EN06 <- raster("EN_0006.png")
EN07 <- raster("EN_0007.png")
EN08 <- raster("EN_0008.png")
EN09 <- raster("EN_0009.png")
EN10 <- raster("EN_0010.png")
EN11 <- raster("EN_0011.png")
EN12 <- raster("EN_0012.png")
EN13 <- raster("EN_0013.png")
#potevo fare un ciclo for per fare prima 
list_rast=list()
for(i in 1:length(rlist)){
  r=raster(rlist[[i]])
  list_rast[[i]]=r
}
# oppure un altro metodo studiato ah hoc per R
library(raser)
setwd("~/lab/esa_no2") #si crea una sottocartella con tutte le immagini png
rlist=list.files(pattern=".png", full.names=T) #in pratica racchiude i file che ci interessano in una lista
list_rast=lapply(rlist, raster) #la funzione lapply le importa
#plot della immagine uno e della 13 per vedere confronto
cl <- colorRampPalette(c('red','orange','yellow'))(100) #cambiamo i colori 
plot(EN01, col=cl)
 plot(EN013, col=cl)
par(mfrow=c(1,2))
plot(EN01, col=cl)
plot(EN13, col=cl)
#ora facciamo una differenza tra le due immagini 
difno2 <- EN13 - EN01
cldif <- colorRampPalette(c('blue','black','yellow'))(100) #
plot(difno2, col=cldif)
#facciamo delle statistiche di base
#1 plottiamo tutte le mappe, ho due strade 
#la più lentapar(mfrow=c(4,4))
par(mfrow=c(4,4))
plot(EN01, col=cl)
plot(EN02, col=cl)
plot(EN03, col=cl)
plot(EN04, col=cl)
plot(EN05, col=cl)
plot(EN06, col=cl)
plot(EN07, col=cl)
plot(EN08, col=cl)
plot(EN09, col=cl)
plot(EN10, col=cl)
plot(EN11, col=cl)
plot(EN12, col=cl)
plot(EN13, col=cl)
## 6/05 caricare i dati in una sola tranche
library(raser)
setwd("~/lab/esa_no2") #ho messo in una sottocartella le 13 immagini 
rlist <- list.files(pattern=".png") #creo una lista di file che sono accomunati dalla dicitura .png
rlist #vedo la lista che ho appena creato (ci sono le 13 immagink)
listafinale <- lapply(rlist, raster) #la funzione lapply opera una funzione su una lista di file( noi appliciamo la funzione ratser)
EN <- stack(listafinale) #la funzione stack imballa le 13 immagini in una sola 
cl <- colorRampPalette(c('red','orange','yellow'))(100) # 
plot(EN, col=cl) #plot della nuova immagine che comprende tutte le 13 precedenti e con una nuova nuance di colori.


























